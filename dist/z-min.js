/*! z | 2014-04-04 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=function(){var b=[],c=function(a){return 1===b.push(a)},d=function(){var a=b,c=0,d=b.length;for(b=[];d>c;)a[c++]()};if("undefined"!=typeof setImmediate&&"function"==typeof setImmediate)return function(a){c(a)&&setImmediate(d)};if("object"==typeof process&&process.nextTick)return function(a){c(a)&&process.nextTick(d)};if(a.postMessage){var e=!0;if(a.attachEvent){var f=function(){e=!1};a.attachEvent("onmessage",f),a.postMessage("__checkAsync","*"),a.detachEvent("onmessage",f)}if(e){var g="__promise"+new Date,h=function(a){a.data===g&&(a.stopPropagation&&a.stopPropagation(),d())};return a.addEventListener?a.addEventListener("message",h,!0):a.attachEvent("onmessage",h),function(b){c(b)&&a.postMessage(g,"*")}}}return function(a){c(a)&&setTimeout(d,0)}}(),d=function(a,b,c){if(!a)return a;if(c=c||a,Array.prototype.forEach&&a.forEach)a.forEach(b);else if(a instanceof Array)for(var d=0;d<a.length&&(!a[d]||!b.call(c,a[d],d,a));d+=1);else for(var e in a)if(a.hasOwnProperty(e)&&e&&b.call(c,a[e],e,a))break;return a},e=function(){this._state=0,this._onReady=[],this._onFailed=[]};e.prototype.done=function(a,b){var d=this;return c(function(){a&&"function"==typeof a&&(1===d._state?a.call(d):d._onReady.push(a)),b&&"function"==typeof b&&(-1===d._state?b.call(d):d._onFailed.push(b))}),this},e.prototype.resolve=function(a){this._state=1,a=a||this,d(this._onReady,function(b){b.call(a,Array.prototype.slice.call(arguments,1))}),this._onReady=[]},e.prototype.reject=function(a){this._state=-1,a=a||this,d(this._onFailed,function(b){b.call(a,Array.prototype.slice.call(arguments,1))}),this._onFailed=[]};var f=function(a,b){if(!(this instanceof f))return new f(a,b);if(f.namespaceExists(a))throw Error("Namespace was already defined: "+a);delete f.env.namespaces[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!f.getObjectByName(c);)f.env.namespaces[c]=!0;f.env.modules[a]=this,this._wait=new e,this._state=f.env.MODULE_STATE.PENDING,this._namespaceString=a,this._namespace=f.createNamespace(a),this._dependencies=[],this._factory=null,b&&"function"==typeof b&&(b.length<2?this.export(b):b(this.import.bind(this),this.export.bind(this)))};if(f.env={namespaces:{},root:"",map:{},shim:{},modules:{},environment:"browser",MODULE_STATE:{PENDING:0,LOADED:1,ENABLED:2,FAILED:-1}},f.global=a,f.namespaceExists=function(a){return!f.env.namespaces[a]&&f.env.namespaces[a]!==b},f.map=function(a,b){f.env.map[a]||(f.env.map[a]=[]),f.env.map[a]=f.env.map[a].concat(b)},f.shim=function(a,b){b=b||{},b.map&&f.map(b.map,[a]),f.env.shim[a]=b},f.getMappedPath=function(a){var b=!1,c=a.substring(0,a.lastIndexOf("."))+".*";return d(f.env.map,function(a,d){a.indexOf(c)>-1&&(b=d)}),b?b:(d(f.env.map,function(c,d){c.indexOf(a)>-1&&(b=d)}),b)},f.createNamespace=function(a,c,d){for(var e,g=d||f.global,h=a.split(".");h.length&&(e=h.shift());)h.length||c===b?g=g[e]?g[e]:g[e]={}:g[e]=c;return g},f.getObjectByName=function(a,b){for(var c,d=b||f.global,e=a.split(".");c=e.shift();){if("undefined"==typeof d[c])return null;d=d[c]}return d},f.prototype.import=function(a){return this._dependencies.push(a),this},f.prototype.export=function(a){var b=this;return this._factory=a,c(function(){b.enable()}),this},f.prototype.enable=function(){return this.isPending()?(this.getDependencies(),this):this.isLoaded()?(this.runFactory(),this):this.isFailed()?(this._wait.reject(),this):(this.isEnabled()&&this._wait.resolve(),this)},f.prototype.done=function(a,b){return this._wait.done(a,b),this},f.prototype.catch=function(a){return this.done(null,a),this},f.prototype.disable=function(a){return this.isFailed(!0),this.catch(function(){c(function(){throw Error(a)})}),this.enable()},f.prototype.getDependencies=function(){var a=[],b=this,c=this._dependencies.length;d(this._dependencies,function(b){null===f.getObjectByName(b)&&a.push(b)}),c=a.length;var e=c;return c>0?d(a,function(a){f.global.MODULE_LOADER(a,function(){e-=1,0>=e&&(b.isLoaded(!0),b.enable())},function(){b.disable("Could not load dependency: "+a)})}):(this.isLoaded(!0),this.enable()),this},f.prototype.runFactory=function(){var a=!0,b=this;if(d(this._dependencies,function(c){if(a){if(f.env.shim.hasOwnProperty(c))return void(f.env.namespaces[c]=!0);if(!f.env.modules.hasOwnProperty(c))return b.disable("A dependency was not loaded: "+c),void(a=!1);var d=f.env.modules[c];return d.isFailed()?(b.disable("A dependency failed: "+c),void(a=!1)):d.isEnabled()?void 0:(d.enable().done(function(){b.enable()}),void(a=!1))}}),a){if(this._factory||this.disable("No factory defined: "+this._namespaceString),"node"!==f.env.environment?this._factory.call(this._namespace):this._factory=this._factory.toString(),this._namespace.hasOwnProperty("exports")){var c=this._namespace.exports;f.createNamespace(this._namespaceString,c),this._namespace=f.getObjectByName(this._namespaceString)}this.isEnabled(!0),this.enable()}},d(["Enabled","Loaded","Pending","Failed"],function(a){var b=f.env.MODULE_STATE[a.toUpperCase()];f.prototype["is"+a]=function(a){return a&&(this._state=b),this._state===b}}),!f.global.MODULE_LOADER){var g={},h=function(){var a=document.createElement("script");return a.attachEvent?function(a,b){this.done(next,err),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&b.resolve()})}:function(a,b){a.addEventListener("load",function(){b.resolve()},!1),a.addEventListener("error",function(){b.reject()},!1)}}();f.global.MODULE_LOADER=function(a,b,c){var d=f.getMappedPath(a);if(d||(d=a.replace(/\./g,"/")+".js"),d=f.env.root+d,g.hasOwnProperty(d))return void g[d].done(b,c);var i=document.createElement("script"),j=document.getElementsByTagName("head")[0];i.type="text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-namespace",a),g[d]=new e,g[d].done(b,c),h(i,g[d]),i.src=d,j.appendChild(i)}}var i=f.global.module;f.global.module=f,f.noConflict=function(){f.global.module=i},a.z=a.z||f});